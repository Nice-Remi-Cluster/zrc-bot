# 词库问答插件文档

## 插件简介

word_bank_qa 插件是一个专为群聊设计的固定词库问答管理工具。该插件支持分群聊存储，提供问答的增删改查功能，并配备智能文本渲染系统以提升用户体验。

## 使用示例

### 基本使用流程

1. **添加问答**
   ```
   学习 你好 大家好！
   添加问答 天气怎么样 今天天气不错
   ```

2. **查询问答**
   ```
   问 你好
   查问题 天气怎么样
   ```

3. **查看词库**
   ```
   问答列表
   词库列表
   ```

4. **删除问答**
   ```
   忘记 你好
   删除问答 天气怎么样
   ```

## 主要功能

### 1. 问答查询

**基础命令：** `/word_qa q <问题>`

查询指定问题的答案。如果找到匹配的问题，将返回对应的答案；如果未找到，将提示用户该问题不存在。

**快捷指令：**
- `问<问题>`
- `泡泡问 <问题>`
- `泡泡查问题 <问题>`

**使用示例：**
```
问 你好
泡泡问 你好
泡泡查问题 天气怎么样
/word_qa q 机器人是什么
```

**智能渲染：**
- 短答案（≤100字符）：直接发送文本消息
- 长答案（>100字符）：渲染为图片发送，包含问题和答案的完整格式

### 2. 问答添加

**基础命令：** `/word_qa add <问题> <答案>`

添加新的问答对到当前群聊的词库中。如果问题已存在，将更新其答案；如果问题不存在，将创建新的问答记录。

**参数说明：**
- `问题`：要添加的问题内容
- `答案`：对应的答案内容，支持多个词语组合

**快捷指令：**
- `泡泡学习 <问题> <答案>`
- `泡泡添加问答 <问题> <答案>`
- `泡泡加问答 <问题> <答案>`

**使用示例：**
```
泡泡学习 你好 大家好！欢迎来到我们的群聊
泡泡添加问答 天气 今天天气很不错，适合出门
泡泡加问答 时间 现在是工作时间
```

### 3. 问答删除

**基础命令：** `/word_qa remove <问题> [--all]`

删除指定问题的答案。默认删除单个记录，使用 `--all` 参数可删除所有匹配的记录。

**参数说明：**
- `问题`：要删除的问题内容
- `--all` 或 `-A`：可选参数，删除所有匹配的记录

**快捷指令：**
- `泡泡删除问答 <问题>`
- `泡泡删问答 <问题>`
- `泡泡忘记 <问题>`
- `删除全部问答 <问题>`（等同于添加 --all 参数）

**使用示例：**
```
泡泡忘记 你好                    # 删除单个问答
泡泡删除问答 天气                # 删除单个问答
删除全部问答 重复问题         # 删除所有匹配的问答
/word_qa remove 时间 --all   # 删除所有匹配的问答
```

### 4. 问答列表

**基础命令：** `/word_qa list`

显示当前群聊中所有的词库问答记录。为了保持显示效果，问题和答案会进行长度限制显示。

**快捷指令：**
- `泡泡问答列表`
- `泡泡词库列表`
- `泡泡查看问答`

**使用示例：**
```
泡泡问答列表
泡泡词库列表
泡泡查看问答
/word_qa list
```

**显示格式：**
```
当前群聊的词库问答：
1. 你好 -> 大家好！欢迎来到我们的群聊
2. 天气 -> 今天天气很不错，适合出门
3. 时间 -> 现在是工作时间
```

**智能渲染：**
- 短列表（≤100字符）：直接发送文本消息
- 长列表（>100字符）：渲染为图片发送
- 无记录时：直接发送提示文本



## 命令总览

| 功能 | 基础命令 | 快捷指令 | 说明 |
|------|----------|----------|------|
| 查询 | `/word_qa q <问题>` | `问<问题>`<br>`泡泡问 <问题>`<br>`泡泡查问题 <问题>` | 查询指定问题的答案 |
| 添加 | `/word_qa add <问题> <答案>` | `泡泡学习 <问题> <答案>`<br>`泡泡添加问答 <问题> <答案>`<br>`泡泡加问答 <问题> <答案>` | 添加或更新问答 |
| 删除 | `/word_qa remove <问题> [--all]` | `泡泡忘记 <问题>`<br>`泡泡删除问答 <问题>`<br>`泡泡删问答 <问题>`<br>`删除全部问答 <问题>` | 删除指定问答 |
| 列表 | `/word_qa list` | `泡泡问答列表`<br>`泡泡词库列表`<br>`泡泡查看问答` | 显示所有问答 |

## 注意事项

1. **群聊限制**：插件仅在群聊中生效，私聊无法使用
2. **权限管理**：所有群成员都可以添加、删除问答，建议群管理员合理管理
3. **内容长度**：问题最大支持500字符，答案支持长文本
4. **数据安全**：删除操作不可恢复，请谨慎使用
5. **性能优化**：长文本自动渲染为图片，避免刷屏影响群聊体验

## 常见问题

**Q: 为什么有些回复是图片，有些是文字？**
A: 插件会根据内容长度智能选择发送方式。短内容（≤100字符）直接发送文字，长内容自动渲染为图片以提供更好的阅读体验。

**Q: 可以修改已有的问答吗？**
A: 可以。使用添加命令对已存在的问题重新设置答案即可更新。

**Q: 删除问答后可以恢复吗？**
A: 不可以。删除操作是永久性的，请在删除前确认。

**Q: 不同群聊的词库会互相影响吗？**
A: 不会。每个群聊都有独立的词库，互不干扰。

**Q: 支持模糊匹配吗？**
A: 目前仅支持精确匹配。问题必须完全一致才能匹配到对应答案。